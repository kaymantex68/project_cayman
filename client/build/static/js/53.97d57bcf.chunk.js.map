{"version":3,"sources":["pages/admin/groupDiscounts/GroupDiscountUpdate.js"],"names":["Menu","SubMenu","ItemGroup","GroupDiscount","history","match","useState","name","setName","loading","setLoading","groupDiscount","setGroupDiscount","user","useSelector","state","useEffect","getGroupDiscount","params","slug","then","res","data","toast","success","console","log","handleSubmit","e","preventDefault","updateGroupDiscount","discounts","active","token","push","catch","err","response","status","error","children","onSubmit","className","style","fontWeight","type","value","onChange","target","autoFocus","required","placeholder","disabled"],"mappings":"2NAwB+BA,IAAvBC,QAAuBD,IAAdE,UA4EFC,UA1EO,SAAC,GAAsB,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,MAAW,EAChBC,mBAAS,IADO,mBACjCC,EADiC,KAC3BC,EAD2B,OAEVF,oBAAS,GAFC,mBAEjCG,EAFiC,KAExBC,EAFwB,OAGEJ,mBAAS,MAHX,mBAGjCK,EAHiC,KAGlBC,EAHkB,KAKhCC,EAASC,aAAY,SAAAC,GAAK,sBAAUA,MAApCF,KAERG,qBAAU,WACNN,GAAW,GACXO,YAAiBZ,EAAMa,OAAOC,MAAMC,MAAK,SAAAC,GACrCT,EAAiBS,EAAIC,MACrBd,EAAQa,EAAIC,KAAKf,MACjBG,GAAW,GACXa,IAAMC,QAAQ,+NAEnB,IAEHC,QAAQC,IAAI,iBAAkBf,GAE9B,IAAMgB,EAAe,SAACC,GAClBA,EAAEC,iBACFnB,GAAW,GACXoB,YAAoBzB,EAAMa,OAAOC,KAAK,CAAEZ,OAAMwB,UAAUpB,EAAcoB,UAAWC,OAAQrB,EAAcqB,QAAUnB,EAAKoB,OACjHb,MAAK,SAACC,GACHX,GAAW,GACXa,IAAMC,QAAN,sJACAhB,EAAQ,IACRJ,EAAQ8B,KAAK,4BAEhBC,OAAM,SAACC,GACJ1B,GAAW,GACiB,MAAxB0B,EAAIC,SAASC,QAAgBf,IAAMgB,MAAMH,EAAIC,SAASf,UAsCtE,OACI,cAAC,UAAD,CAAiBf,KAAM,8FAAoBiC,SAAU/B,EAAU,cAAC,IAAD,IAhC3D,mCACI,sBACIgC,SAAUd,EADd,SAGI,sBAAKe,UAAU,aAAf,UACI,uBAAOC,MAAO,CAAEC,WAAY,QAA5B,uKACA,uBACIC,KAAK,OACLH,UAAU,eACVI,MAAOvC,EACPwC,SAAU,SAACnB,GAAD,OAAOpB,EAAQoB,EAAEoB,OAAOF,QAClCG,WAAS,EACTC,UAAQ,EACRC,YAAY,4JACZC,SAAU3C,IAEd,uBACA,wBACIiC,UAAU,0BACVU,UAAW7C,GAAQE,EAFvB","file":"static/js/53.97d57bcf.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport {\n    getGroupDiscount,\n    getGroupDiscounts,\n    createGroupDiscount,\n    removeGroupDiscount,\n    updateGroupDiscount,\n} from \"../../../functions/groupDiscount\";\nimport { getBrandPictures } from '../../../functions/uploadImages'\nimport Loading from '../../../components/form/LoadingIcon'\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nimport LocalSearch from '../../../components/form/LocalSearch'\nimport AdminNavigation from '../../../components/nav/AdminNavigation'\nimport {\n    PercentageOutlined,\n    CheckSquareOutlined,\n    EditOutlined,\n    DeleteOutlined,\n} from '@ant-design/icons'\nimport classes from './GroupDiscounts.module.css'\nimport { Input, Checkbox, Avatar, Badge, Menu } from 'antd';\nconst { SubMenu, ItemGroup } = Menu;\n\nconst GroupDiscount = ({history, match}) => {\n    const [name, setName] = useState('')\n    const [loading, setLoading] = useState(false)\n    const [groupDiscount, setGroupDiscount] = useState(null)\n\n    const { user } = useSelector(state => ({ ...state }))\n\n    useEffect(() => {\n        setLoading(true)\n        getGroupDiscount(match.params.slug).then(res => {\n            setGroupDiscount(res.data)\n            setName(res.data.name)\n            setLoading(false)\n            toast.success('Информация о скидочной группе загружена')\n        })\n    }, [])\n\n    console.log('group discount', groupDiscount)\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setLoading(true);\n        updateGroupDiscount(match.params.slug,{ name, discounts:groupDiscount.discounts, active: groupDiscount.active }, user.token)\n            .then((res) => {\n                setLoading(false);\n                toast.success(`Скидочная группа обновлена`);\n                setName(\"\");\n                history.push(\"/admin/groupDiscounts\")\n            })\n            .catch((err) => {\n                setLoading(false);\n                if (err.response.status === 400) toast.error(err.response.data);\n            });\n    }\n\n\n    const ReturnGroupDiscounts = () => {\n        return (\n            <>\n                <form\n                    onSubmit={handleSubmit}\n                >\n                    <div className=\"form-group\">\n                        <label style={{ fontWeight: \"bold\" }}>Новое название группы скидок</label>\n                        <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                            autoFocus\n                            required\n                            placeholder=\"новое название группы скидок\"\n                            disabled={loading}\n                        />\n                        <br />\n                        <button\n                            className=\"btn btn-outline-primary\"\n                            disabled={!name || loading}\n                        >\n                            сохранить\n                    </button>\n                    </div>\n                </form>\n\n\n            </>\n        )\n    }\n\n    return (\n        <AdminNavigation name={'Скидочные группы'} children={loading ? <Loading /> : ReturnGroupDiscounts()} />\n    );\n};\n\nexport default GroupDiscount;\n"],"sourceRoot":""}