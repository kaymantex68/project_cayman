{"version":3,"sources":["pages/admin/groupDiscounts/GroupDiscountUpdate.js"],"names":["Menu","SubMenu","ItemGroup","GroupDiscount","history","match","useState","name","setName","loading","setLoading","groupDiscount","setGroupDiscount","user","useSelector","state","useEffect","getGroupDiscount","params","slug","then","res","data","toast","success","console","log","handleSubmit","e","preventDefault","updateGroupDiscount","discounts","active","token","push","catch","err","response","status","error","children","onSubmit","className","style","fontWeight","type","value","onChange","target","autoFocus","required","placeholder","disabled"],"mappings":"2NAwB+BA,IAAvBC,QAAuBD,IAAdE,UA4EFC,UA1EO,SAAC,GAAsB,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,MAAW,EAChBC,mBAAS,IADO,mBACjCC,EADiC,KAC3BC,EAD2B,OAEVF,oBAAS,GAFC,mBAEjCG,EAFiC,KAExBC,EAFwB,OAGEJ,mBAAS,MAHX,mBAGjCK,EAHiC,KAGlBC,EAHkB,KAKhCC,EAASC,aAAY,SAAAC,GAAK,sBAAUA,MAApCF,KAERG,qBAAU,WACNN,GAAW,GACXO,YAAiBZ,EAAMa,OAAOC,MAAMC,MAAK,SAAAC,GACrCT,EAAiBS,EAAIC,MACrBd,EAAQa,EAAIC,KAAKf,MACjBG,GAAW,GACXa,IAAMC,QAAQ,+NAEnB,IAEHC,QAAQC,IAAI,iBAAkBf,GAE9B,IAAMgB,EAAe,SAACC,GAClBA,EAAEC,iBACFnB,GAAW,GACXoB,YAAoBzB,EAAMa,OAAOC,KAAK,CAAEZ,OAAMwB,UAAUpB,EAAcoB,UAAWC,OAAQrB,EAAcqB,QAAUnB,EAAKoB,OACjHb,MAAK,SAACC,GACHX,GAAW,GACXa,IAAMC,QAAN,sJACAhB,EAAQ,IACRJ,EAAQ8B,KAAK,4BAEhBC,OAAM,SAACC,GACJ1B,GAAW,GACiB,MAAxB0B,EAAIC,SAASC,QAAgBf,IAAMgB,MAAMH,EAAIC,SAASf,UAsCtE,OACI,cAAC,UAAD,CAAiBf,KAAM,8FAAoBiC,SAAU/B,EAAU,cAAC,IAAD,IAhC3D,mCACI,sBACIgC,SAAUd,EADd,SAGI,sBAAKe,UAAU,aAAf,UACI,uBAAOC,MAAO,CAAEC,WAAY,QAA5B,uKACA,uBACIC,KAAK,OACLH,UAAU,eACVI,MAAOvC,EACPwC,SAAU,SAACnB,GAAD,OAAOpB,EAAQoB,EAAEoB,OAAOF,QAClCG,WAAS,EACTC,UAAQ,EACRC,YAAY,4JACZC,SAAU3C,IAEd,uBACA,wBACIiC,UAAU,0BACVU,UAAW7C,GAAQE,EAFvB","file":"static/js/53.a56c50b0.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n    getGroupDiscount,\r\n    getGroupDiscounts,\r\n    createGroupDiscount,\r\n    removeGroupDiscount,\r\n    updateGroupDiscount,\r\n} from \"../../../functions/groupDiscount\";\r\nimport { getBrandPictures } from '../../../functions/uploadImages'\r\nimport Loading from '../../../components/form/LoadingIcon'\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LocalSearch from '../../../components/form/LocalSearch'\r\nimport AdminNavigation from '../../../components/nav/AdminNavigation'\r\nimport {\r\n    PercentageOutlined,\r\n    CheckSquareOutlined,\r\n    EditOutlined,\r\n    DeleteOutlined,\r\n} from '@ant-design/icons'\r\nimport classes from './GroupDiscounts.module.css'\r\nimport { Input, Checkbox, Avatar, Badge, Menu } from 'antd';\r\nconst { SubMenu, ItemGroup } = Menu;\r\n\r\nconst GroupDiscount = ({history, match}) => {\r\n    const [name, setName] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const [groupDiscount, setGroupDiscount] = useState(null)\r\n\r\n    const { user } = useSelector(state => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        getGroupDiscount(match.params.slug).then(res => {\r\n            setGroupDiscount(res.data)\r\n            setName(res.data.name)\r\n            setLoading(false)\r\n            toast.success('Информация о скидочной группе загружена')\r\n        })\r\n    }, [])\r\n\r\n    console.log('group discount', groupDiscount)\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        updateGroupDiscount(match.params.slug,{ name, discounts:groupDiscount.discounts, active: groupDiscount.active }, user.token)\r\n            .then((res) => {\r\n                setLoading(false);\r\n                toast.success(`Скидочная группа обновлена`);\r\n                setName(\"\");\r\n                history.push(\"/admin/groupDiscounts\")\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                if (err.response.status === 400) toast.error(err.response.data);\r\n            });\r\n    }\r\n\r\n\r\n    const ReturnGroupDiscounts = () => {\r\n        return (\r\n            <>\r\n                <form\r\n                    onSubmit={handleSubmit}\r\n                >\r\n                    <div className=\"form-group\">\r\n                        <label style={{ fontWeight: \"bold\" }}>Новое название группы скидок</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            autoFocus\r\n                            required\r\n                            placeholder=\"новое название группы скидок\"\r\n                            disabled={loading}\r\n                        />\r\n                        <br />\r\n                        <button\r\n                            className=\"btn btn-outline-primary\"\r\n                            disabled={!name || loading}\r\n                        >\r\n                            сохранить\r\n                    </button>\r\n                    </div>\r\n                </form>\r\n\r\n\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <AdminNavigation name={'Скидочные группы'} children={loading ? <Loading /> : ReturnGroupDiscounts()} />\r\n    );\r\n};\r\n\r\nexport default GroupDiscount;\r\n"],"sourceRoot":""}